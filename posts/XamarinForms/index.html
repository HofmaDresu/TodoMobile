<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
    <h1>Creating TODO in Xamarin Forms</h1>
    <p>
    Today we're going to look at creating our TODO application using Xamarin Forms. Xamarin Forms is a cross platform framework build on the .NET stack
    that allows for massive code re-use across platforms. It allows us to share both the application logic and the UI code between multiple target
    platforms (mostly). There are some exceptions for truly native behavior, of course, like Notifications (which we won't get into today) and platform-specific
    elements like the Android Floating Action Button (we'll talk more about that later in this post). For now let's just get started and see what we get out of
    the box.
    <br />
    Note: All of my steps are using Visual Studio 2017 Community on Windows. Your mileage may vary if you work on a different edition of VS or on Visual Studio for Mac.
    </p>
    <h3>Tools and Environment</h3>
    <p>
    We can develop for Xamarin Forms on either a PC or a Mac. On PC we would use <a href="" target="_blank">Visual Studio</a> (I'm using Visual Studio 2017 Community) 
    and on Mac we would use <a href="" target="_blank">Visual Studio for Mac</a>. For Android development, the installers for Visual Studio will install
    all additional dependencies, like the Android SDK, emulators, Java, etc. iOS setup can be a little trickier: no matter which OS you develop on, you'll
    need a Mac with XCode installed. If you're developing on a Windows machine, Visual Studio will connect to the Mac for iOS compilation. This is needed
    because Apple requires a Mac to compile iOS applications.
    <br />
    In addition to Visual Studio, I would also recommend installing Android Studio. This isn't required, especially for quick prototyping, but it has
    better tools for creating/managing emulators and for managing the SDK.
    <br />
    With all this installed, we can now start building our app!
    </p>
    <h3>Hello World</h3>
    <p>
    The first thing we'll do is create a new app project and see what Xamarin Forms gives us out-of-the-box. We open Visual Studio and select File-&gt;New Project.
    This opens a dialog where we'll select Installed-&gt;Visual C#-&gt;Cross-Platform-&gt;Mobile App (Xamarin.Forms) and name our solution "TodoXamarinForms".
    <br />
    <img src="./CreateProject.png" width="600" />
    <br />
    Next we're asked what platforms we want to target and what type of shared project we want. We'll deselect Windows so we only create Android and iOS
    projects, and we'll select .NET Standard.
    <br />
    <img src="./ProjectType.png" width="600" />
    <br />
    Visual Studio will create our solution with 3 projects: a .NET Standard library (TodoXamarinForms), an Android project (TodoXamarinForms.Android),
    and an iOS project (TodoXamarinForms.iOS).
    <br />
    <img src="./InitialSolution.png" width="300" />
    <br />
    Most of our work will be done in the .NET Standard library, with only minor ventures into the other projects for platform-specific work. Now let's run
    our app and see what we have! Make sure either the iOS or Android project is set as your startup project (it should be listed in <b>bold</b>) and 
    either hit the green 'play' button or the F5 key. This will launch your emulator (simulator if iOS) and deploy the app.
    <br />
    <div>
        <label>Android</label>
        <img src="./HelloWorld.png" width="300" />
        <label>iOS</label>
        <img src="" width="300">
        <!--TODO: iOS screenshot -->
    </div>
    <br />
    Out of the box we have a Hello World app running on both Android and iOS. It's not very exciting yet, but this is where the real fun begins.
    </p>
    <h3>Displaying a list of TODO items</h3>
    <p>
    Xamarin Forms uses XAML for UI developent, which provides access to two way databinding. Unfortunately, there is a little boilerplate code required
    to get this working. We're going to use the <a href="">Fody</a> package and a base class to clean that up a little.
    </p>
    <p>
    First we'll install the Fody package. Right click on the solution and select 'Manage NuGet Packages for Solution'. Search for PropertyChanged.Fody
    and install it on the .NET Standard project (reminder: the one that says neither Android nor iOS). Next we need to create a configuration XML file.
    <br />
    <img src="./FODY.png" width="500" />
    <br />
    Right click on the TodoXamarinForms project and select 'Add-&gt;New Item'. Select XML from the list and name it FodyWeavers.xml. Paste this content
    into the file:
    <pre>
&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;Weavers&gt;
  &lt;PropertyChanged/&gt;
&lt;/Weavers&gt;
    </pre>
    Finally we want to create a base class we'll use to make our other classes observable. Right click on TodoXamarinForms again and select Add-&gt;Class.
    Name the class BaseFodyObservable.cs. In the class, implement INotifyPropertyChanged.
    <pre>
using System.ComponentModel;

namespace TodoXamarinForms
{
    class BaseFodyObservable : INotifyPropertyChanged
    {
#pragma warning disable CS0067
        public event PropertyChangedEventHandler PropertyChanged;
#pragma warning restore
    }
}
    </pre>
    You may notice a couple weird looking #pragma statements in the sample code. These aren't strictly needed, but they tell the compiler to ignore
    the fact that nothing directly uses the PropertyChanged event. This has no effect on the functionality of our app, but I prefer to hide this warning
    since we know it will be used by the Fody package.
    </p>
    <p>
    Now that we have the boilerplate out of the way, we should is define our TODO item. Since this is a simple app, we only have 3 properties we care
    about for a todo: a unique id, a title, and whether or not it has been completed. For this we'll create a new class called TodoItem.cs that is a
    subclass of our BaseFodyObservable. Follow the same steps used to create the BaseFodyObservable file and add the following content:
    <pre>
namespace TodoXamarinForms
{
    public class TodoItem : BaseFodyObservable
    {
        public int Id { get; set; }
        public string Title { get; set; }
        public bool IsCompleted { get; set; } 
    }
}
    </pre>
    </p>
    <p>
    Now it's time to start looking at the data we want to show on our landing screen. To start with, we want to display a title at the top of the screen
    and show a list of our todo items. We'll create a view model called TodoListViewModel that holds this data. Don't forget to make this a subclass of
    BaseFodyObservable as well.
    <pre>
using System.Collections.ObjectModel;

namespace TodoXamarinForms
{
    public class TodoListViewModel : BaseFodyObservable
    {
        public string Title { get; set; }
        public ObservableCollection<TodoItem> TodoList { get; set; }
    }
}
    </pre>
    The final thing we want to do for now is to create a default list of Todo items so we have something to display. We'll start by hard-coding a few
    items.
    <pre>
...
public ObservableCollection<TodoItem> TodoList { get; set; } = new ObservableCollection<TodoItem>
{
    new TodoItem { Id = 0, Title = "Create First Todo", IsCompleted = true},
    new TodoItem { Id = 1, Title = "Run a Marathon"},
    new TodoItem { Id = 2, Title = "Create TodoXamarinForms blog post"},
}; 
...
    </pre>
</body>
</html>
